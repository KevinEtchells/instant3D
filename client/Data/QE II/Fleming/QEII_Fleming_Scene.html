<template name="QEII_Fleming_Scene">
	
	<style>
		#popup {position: absolute; left: 100px; top: 100px; width: 200px; height: 200px; background-color: white; opacity: 0.5;}
	</style>
	
	<x3d>
		<Scene>
			<NavigationInfo headlight="true"></NavigationInfo>
				<Background DEF="WO_World" groundColor="0.2 0.2 0.2" skyColor="0.051 0.051 0.051"></Background>

				<Transform DEF="Stage" translation="0 0 0" scale="{{scale stageWidth}} 0.2 0.8">
					<Shape onclick="selectObject('stage', '1', event)">
						<Appearance>
							<Material DEF="Stage_Carpet" diffuseColor="0 0 0" specularColor="0.084 0.084 0.084" ambientIntensity="0.333" shininess="0.098"></Material>
						</Appearance>
						<box></box>
					</Shape>

					<Transform DEF="Bounding_Box" scale="2 2 2">
						<shape ispickable="false" def="line" render="{{isSelected 'stage' '1'}}" bboxcenter="0,0,0" bboxsize="-1,-1,-1">
							<indexedlineset coordindex="0 1 2 3 0 -1, 4 5 6 7 4 -1, 0 4 -1, 1 5 -1, 2 6 -1, 3 7 -1" solid="true" ccw="true" usegeocache="true" colorpervertex="true" colorindex="">
								<coordinate id="bbox_points" point="-0.5 -0.5 -0.5, -0.5 -0.5 0.5, 0.5 -0.5 0.5, 0.5 -0.5 -0.5, -0.5 0.5 -0.5, -0.5 0.5 0.5, 0.5 0.5 0.5, 0.5 0.5 -0.5"></coordinate>
								<color color="1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0"></color>
							</indexedlineset>
						</shape>
					</Transform>

				</Transform>
				
				<Transform DEF="Set" translation="0 1.3 -0.78" scale="{{scaleSet stageWidth 10}} 1.1 0.02">
					<Shape onclick="selectObject('set', '1', event)">
						<Appearance>
							<Material DEF="MA_Suede" emissiveColor="{{uplightRed}} {{uplightGreen}} {{uplightBlue}}" diffuseColor="0.384 0.384 0.384" specularColor="0.155 0.155 0.155" ambientIntensity="0.333" shininess="0.098"></Material>
						</Appearance>
						<box></box>
					</Shape>

					<Transform DEF="Bounding_Box" scale="2 2 2">
						<Appearance><Material diffuseColor="0.5 0.5 0.5" specularColor="0.084 0.084 0.084"></Material></Appearance>
						<shape ispickable="false" def="line" render="{{isSelected 'set' '1'}}" bboxcenter="0,0,0" bboxsize="-1,-1,-1">
							<indexedlineset coordindex="0 1 2 3 0 -1, 4 5 6 7 4 -1, 0 4 -1, 1 5 -1, 2 6 -1, 3 7 -1" solid="true" ccw="true" usegeocache="true" colorpervertex="true" colorindex="">
								<coordinate id="bbox_points" point="-0.5 -0.5 -0.5, -0.5 -0.5 0.5, 0.5 -0.5 0.5, 0.5 -0.5 -0.5, -0.5 0.5 -0.5, -0.5 0.5 0.5, 0.5 0.5 0.5, 0.5 0.5 -0.5"></coordinate>
								<color color="1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0"></color>
							</indexedlineset>
						</shape>
					</Transform>

				</Transform>
				
				<Transform DEF="Uplighters" translation="0 1.3 -0.75" scale="{{scaleSet stageWidth 10}} 1.1 0">
					<Shape onclick="selectObject('set', '1', event)">
						<Appearance>
							<Material diffuseColor="0.5 0.5 0.5" specularColor="0.084 0.084 0.084"></Material>
							<ImageTexture url="../../../chromas3.png"></ImageTexture>
						</Appearance>
						<box></box>
					</Shape>
				</Transform>
				
				{{#each screens}}

					<Transform DEF="Screen_Surround" translation="{{screenPositionX}} 1.7 -0.74" scale="1.225 0.9395833333 0.04">
						<Shape>
							<Appearance>
								<Material DEF="Black_Felt" diffuseColor="0 0 0" specularColor="0.1 0.1 0.1" ambientIntensity="0.333" shininess="0.1"></Material>
							</Appearance>
							<box></box>
						</Shape>
						
						<!--
						<Transform translation="-1 0.7 3" scale="5 5 50" rotation="0 0 0.707107 3.141593">
							<Shape>
								<Appearance><Material emissiveColor="1 0 0"></Material></Appearance>
								<IndexedFaceSet solid="true" creaseAngle="4.0000" coordIndex="4 6 5 -1 2 4 3 -1 2 6 4 -1 2 1 6 -1 1 0 6 -1 13 11 12 -1 11 9 10 -1 13 9 11 -1 8 9 13 -1 7 8 13 -1 15 17 16 14 -1 17 19 18 16 -1 19 21 20 18 -1 21 23 22 20 -1 23 25 24 22 -1 25 27 26 24 -1 27 15 14 26 -1 ">
									<Coordinate DEF="coords_ME_Curve" point="0.107061 0.069939 0.020000 0.107238 0.123075 0.020000 0.029837 0.123075 0.020000 0.029837 0.173865 0.020000 0.106532 0.173865 0.020000 0.105015 0.227010 0.020000 0.184586 0.147447 0.020000 0.107061 0.069939 -0.020000 0.107238 0.123075 -0.020000 0.029837 0.123075 -0.020000 0.029837 0.173865 -0.020000 0.106532 0.173865 -0.020000 0.105015 0.227010 -0.020000 0.184586 0.147447 -0.020000 0.107061 0.069939 -0.020000 0.107061 0.069939 0.020000 0.107238 0.123075 -0.020000 0.107238 0.123075 0.020000 0.029837 0.123075 -0.020000 0.029837 0.123075 0.020000 0.029837 0.173865 -0.020000 0.029837 0.173865 0.020000 0.106532 0.173865 -0.020000 0.106532 0.173865 0.020000 0.105015 0.227010 -0.020000 0.105015 0.227010 0.020000 0.184586 0.147447 -0.020000 0.184586 0.147447 0.020000 "></Coordinate>
								</IndexedFaceSet>
							</Shape>
						</Transform>
						<Transform translation="1 -0.8 3" scale="5 5 50" rotation="0 0 0 3.141593">
							<Shape>
								<Appearance><Material emissiveColor="1 0 0"></Material></Appearance>
								<IndexedFaceSet solid="true" creaseAngle="4.0000" coordIndex="4 6 5 -1 2 4 3 -1 2 6 4 -1 2 1 6 -1 1 0 6 -1 13 11 12 -1 11 9 10 -1 13 9 11 -1 8 9 13 -1 7 8 13 -1 15 17 16 14 -1 17 19 18 16 -1 19 21 20 18 -1 21 23 22 20 -1 23 25 24 22 -1 25 27 26 24 -1 27 15 14 26 -1 ">
									<Coordinate DEF="coords_ME_Curve" point="0.107061 0.069939 0.020000 0.107238 0.123075 0.020000 0.029837 0.123075 0.020000 0.029837 0.173865 0.020000 0.106532 0.173865 0.020000 0.105015 0.227010 0.020000 0.184586 0.147447 0.020000 0.107061 0.069939 -0.020000 0.107238 0.123075 -0.020000 0.029837 0.123075 -0.020000 0.029837 0.173865 -0.020000 0.106532 0.173865 -0.020000 0.105015 0.227010 -0.020000 0.184586 0.147447 -0.020000 0.107061 0.069939 -0.020000 0.107061 0.069939 0.020000 0.107238 0.123075 -0.020000 0.107238 0.123075 0.020000 0.029837 0.123075 -0.020000 0.029837 0.123075 0.020000 0.029837 0.173865 -0.020000 0.029837 0.173865 0.020000 0.106532 0.173865 -0.020000 0.106532 0.173865 0.020000 0.105015 0.227010 -0.020000 0.105015 0.227010 0.020000 0.184586 0.147447 -0.020000 0.184586 0.147447 0.020000 "></Coordinate>
								</IndexedFaceSet>
							</Shape>
						</Transform>
						-->

						<Transform DEF="Bounding_Box" scale="2 2 2">
							<shape ispickable="false" def="line" render="{{isSelected 'screen' id}}" bboxcenter="0,0,0" bboxsize="-1,-1,-1">
								<indexedlineset coordindex="0 1 2 3 0 -1, 4 5 6 7 4 -1, 0 4 -1, 1 5 -1, 2 6 -1, 3 7 -1" solid="true" ccw="true" usegeocache="true" colorpervertex="true" colorindex="">
									<coordinate id="bbox_points" point="-0.5 -0.5 -0.5, -0.5 -0.5 0.5, 0.5 -0.5 0.5, 0.5 -0.5 -0.5, -0.5 0.5 -0.5, -0.5 0.5 0.5, 0.5 0.5 0.5, 0.5 0.5 -0.5"></coordinate>
									<color color="1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0"></color>
								</indexedlineset>
							</shape>
						</Transform>

					</Transform>

					<Transform DEF="Screen" translation="{{screenPositionX}} 1.7 -0.69" scale="1.141666667 0.85625 0">
						<Shape onclick="selectObject('screen', {{id}}, event)" onmousemove="dragObject({{id}}, event)">
							<Appearance>
								<!--<ImageTexture DEF="IM_Screen4-3_jpg" url="{{_host}}/resource/{{Id}}/{{slide}}"></ImageTexture>-->
								<Material DEF="Screen" diffuseColor="1 1 1" specularColor="1 1 1" emissiveColor="1 1 1" ambientIntensity="0.333" shininess="0.1"></Material>
							</Appearance>
							<box></box>
						</Shape>
					</Transform>

				{{/each}}
				
				<Transform DEF="Set_Graphics_SR" translation="{{setGraphicsX 'SR' stageWidth}} 1.6 -0.74" scale="{{setGraphicsScale setGraphicSize setGraphics}}" 
					onclick="selectObject('graphics', 'SR', event)">
					<Shape>
						<Appearance>
							<ImageTexture url="{{_host}}/resource/{{Id}}/{{setGraphics}}"></ImageTexture>
						</Appearance>
						<box></box>
					</Shape>

					<Transform DEF="Bounding_Box" scale="2 2 2">
						<shape ispickable="false" def="line" render="{{isSelected 'graphics' 'SR'}}" bboxcenter="0,0,0" bboxsize="-1,-1,-1">
							<indexedlineset coordindex="0 1 2 3 0 -1, 4 5 6 7 4 -1, 0 4 -1, 1 5 -1, 2 6 -1, 3 7 -1" solid="true" ccw="true" usegeocache="true" colorpervertex="true" colorindex="">
								<coordinate id="bbox_points" point="-0.5 -0.5 -0.5, -0.5 -0.5 0.5, 0.5 -0.5 0.5, 0.5 -0.5 -0.5, -0.5 0.5 -0.5, -0.5 0.5 0.5, 0.5 0.5 0.5, 0.5 0.5 -0.5"></coordinate>
								<color color="1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0"></color>
							</indexedlineset>
						</shape>
					</Transform>
					
				</Transform>
				
				<Transform DEF="Set_Graphics_SL" translation="{{setGraphicsX 'SL' stageWidth}} 1.6 -0.74" scale="{{setGraphicsScale setGraphicSize setGraphics}}"
					onclick="selectObject('graphics', 'SL', event)">
					<Shape>
						<Appearance>
							<ImageTexture url="{{_host}}/resource/{{Id}}/{{setGraphics}}"></ImageTexture>
						</Appearance>
						<box></box>
					</Shape>

					<Transform DEF="Bounding_Box" scale="2 2 2">
						<shape ispickable="false" def="line" render="{{isSelected 'graphics' 'SL'}}" bboxcenter="0,0,0" bboxsize="-1,-1,-1">
							<indexedlineset coordindex="0 1 2 3 0 -1, 4 5 6 7 4 -1, 0 4 -1, 1 5 -1, 2 6 -1, 3 7 -1" solid="true" ccw="true" usegeocache="true" colorpervertex="true" colorindex="">
								<coordinate id="bbox_points" point="-0.5 -0.5 -0.5, -0.5 -0.5 0.5, 0.5 -0.5 0.5, 0.5 -0.5 -0.5, -0.5 0.5 -0.5, -0.5 0.5 0.5, 0.5 0.5 0.5, 0.5 0.5 -0.5"></coordinate>
								<color color="1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0, 1 0.27 0"></color>
							</indexedlineset>
						</shape>
					</Transform>
					
				</Transform>
				
				{{#if topTable}}
				<!--
					<Transform DEF="Top_table_TRANSFORM" translation="{{ttPos}} 0.55 -0.65" scale="{{ttScale}} 0.32 0.35">
						<Shape>
							<Appearance>
								<Material DEF="MA_Wood" diffuseColor="0.8 0.363 0.156" specularColor="0.401 0.401 0.401" ambientIntensity="0.3" shininess="0.1"></Material>
							</Appearance>
							<box></box>
						</Shape>
					</Transform>
					<Transform DEF="ModPanelFront_TRANSFORM" translation="{{ttPos}} -0.916423 -0.65" scale="{{ttScale}} 0.38 0.005" 
						rotation="0.000000 0.707107 0.707107 3.141593">
						<Shape>
							<Appearance>
								{{{material 'modPanel'}}}
							</Appearance>
							<box></box>
						</Shape>
					</Transform>
					<Transform DEF="Mod_Panel_side_1_TRANSFORM" translation="5 -0.533376 -0.65" scale="0.005 0.38 0.38">
						<Shape>
							<Appearance>
								{{{material 'modPanel'}}}
							</Appearance>
							<box></box>
						</Shape>
					</Transform>
					<Transform DEF="Mod_Panel_side_2_TRANSFORM" translation="{{modPanelReturnPos}} -0.533376 -0.65" scale="0.005 0.38 0.38"
						rotation="0 0.707107 0.707107 3.141593">
						<Shape>
							<Appearance>
								{{{material 'modPanel'}}}
							</Appearance>
							<box></box>
						</Shape>
					</Transform>
					-->
				{{/if}}

		</Scene>
	</x3d>

</template>
